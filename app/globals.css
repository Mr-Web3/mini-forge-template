@import "tailwindcss";

@theme {
  /* Define colors for Tailwind v4 utilities - these enable opacity modifiers like bg-background/95 */
  --color-background: #ffffff;
  --color-foreground: #171717;
  --color-gray-200: #e5e7eb;
  --color-gray-800: #1f2937;
  
  /* Container configuration */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
  --container-2xl: 1536px;
}

@layer base {
  /* Global overrides for all themes - following Coinbase docs pattern */
  [data-ock-theme='default-light'],
  [data-ock-theme='default-dark'],
  [data-ock-theme='base-light'],
  [data-ock-theme='base-dark'],
  [data-ock-theme='cyberpunk'],
  [data-ock-theme='hacker'] {
    /* Wallet Button Styling - Black background, white text, transparent hover */
    --ock-primary: #000000;
    --ock-primary-hover: transparent;
    --ock-primary-active: #000000;
    --ock-primary-washed: #000000;
    --ock-foreground-inverse: #ffffff;
    
    /* Make button slimmer - smaller border radius */
    --ock-radius-default: 0.5rem;
    --ock-radius-inner: 0.375rem;
  }
  
  /* Container styling - remove padding/gap that creates extra space */
  [data-ock-theme='default-light'] [data-testid="ockConnectWallet_Container"],
  [data-ock-theme='default-dark'] [data-testid="ockConnectWallet_Container"],
  [data-ock-theme='base-light'] [data-testid="ockConnectWallet_Container"],
  [data-ock-theme='base-dark'] [data-testid="ockConnectWallet_Container"] {
    gap: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  
  /* Specific overrides for ConnectWallet button styling (disconnected state) */
  [data-ock-theme='default-light'] button[data-testid="ockConnectWallet_Container"],
  [data-ock-theme='default-dark'] button[data-testid="ockConnectWallet_Container"],
  [data-ock-theme='base-light'] button[data-testid="ockConnectWallet_Container"],
  [data-ock-theme='base-dark'] button[data-testid="ockConnectWallet_Container"] {
    background-color: #000000 !important;
    color: #ffffff !important;
    padding: 0.375rem 0.75rem !important;
    border-radius: 0.5rem !important;
    margin: 0 !important;
  }
  
  [data-ock-theme='default-light'] button[data-testid="ockConnectWallet_Container"]:hover,
  [data-ock-theme='default-dark'] button[data-testid="ockConnectWallet_Container"]:hover,
  [data-ock-theme='base-light'] button[data-testid="ockConnectWallet_Container"]:hover,
  [data-ock-theme='base-dark'] button[data-testid="ockConnectWallet_Container"]:hover {
    background-color: transparent !important;
    background: transparent !important;
  }
  
  /* Connected wallet button - remove OnchainKit defaults and match border exactly */
  [data-ock-theme='default-light'] [data-testid="ockConnectWallet_Connected"],
  [data-ock-theme='default-dark'] [data-testid="ockConnectWallet_Connected"],
  [data-ock-theme='base-light'] [data-testid="ockConnectWallet_Connected"],
  [data-ock-theme='base-dark'] [data-testid="ockConnectWallet_Connected"] {
    /* Remove all OnchainKit background styling */
    background-color: transparent !important;
    background: transparent !important;
    background-image: none !important;
    
    /* Override OnchainKit default padding (px-4 py-3) to match our border exactly */
    padding: 0.5rem 0.75rem !important; /* p-2 = 0.5rem, px-3 = 0.75rem to match border */
    margin: 0 !important;
    
    /* Ensure border and sizing match exactly - border border-[#0b55e9] rounded-md */
    border: 1px solid #0b55e9 !important;
    border-radius: 0.375rem !important; /* rounded-md */
    box-sizing: border-box !important;
    
    /* Remove OnchainKit's default min-width/height that might create extra space */
    min-width: auto !important;
    min-height: auto !important;
    width: fit-content !important;
    height: auto !important;
  }
  
  /* On mobile, adjust button when only showing image - bigger image size, finer border */
  @media (max-width: 767px) {
    [data-ock-theme='default-light'] [data-testid="ockConnectWallet_Connected"]:has(img:only-child),
    [data-ock-theme='default-dark'] [data-testid="ockConnectWallet_Connected"]:has(img:only-child),
    [data-ock-theme='base-light'] [data-testid="ockConnectWallet_Connected"]:has(img:only-child),
    [data-ock-theme='base-dark'] [data-testid="ockConnectWallet_Connected"]:has(img:only-child) {
      padding: 0.25rem !important; /* Smaller padding for image-only button */
      border-radius: 0.375rem !important; /* rounded-md */
      border: 1px solid #0b55e9 !important; /* Finer border on mobile */
      aspect-ratio: 1 / 1 !important; /* Square shape */
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
    }
    
    /* Make image bigger on mobile */
    [data-ock-theme='default-light'] [data-testid="ockConnectWallet_Connected"] img,
    [data-ock-theme='default-dark'] [data-testid="ockConnectWallet_Connected"] img,
    [data-ock-theme='base-light'] [data-testid="ockConnectWallet_Connected"] img,
    [data-ock-theme='base-dark'] [data-testid="ockConnectWallet_Connected"] img {
      width: 2rem !important; /* h-8 = 32px */
      height: 2rem !important;
    }
  }
  
  [data-ock-theme='default-light'] [data-testid="ockConnectWallet_Connected"]:hover,
  [data-ock-theme='default-dark'] [data-testid="ockConnectWallet_Connected"]:hover,
  [data-ock-theme='base-light'] [data-testid="ockConnectWallet_Connected"]:hover,
  [data-ock-theme='base-dark'] [data-testid="ockConnectWallet_Connected"]:hover {
    background-color: transparent !important;
    background: transparent !important;
    background-image: none !important;
  }
  
  /* Remove any extra spacing inside the button */
  [data-ock-theme='default-light'] [data-testid="ockConnectWallet_Connected"] > *,
  [data-ock-theme='default-dark'] [data-testid="ockConnectWallet_Connected"] > *,
  [data-ock-theme='base-light'] [data-testid="ockConnectWallet_Connected"] > *,
  [data-ock-theme='base-dark'] [data-testid="ockConnectWallet_Connected"] > * {
    margin: 0 !important;
  }
  
  /* Wallet Dropdown Z-Index - Target ALL possible Radix UI portal elements */
  /* Target Radix Portal containers first (highest level) */
  body > [data-radix-portal],
  [data-radix-portal] {
    z-index: 10000 !important;
  }
  
  /* Target Popper Content Wrapper (Radix positioning wrapper) */
  [data-radix-popper-content-wrapper],
  [data-radix-popper-content-wrapper][data-testid*="WalletDropdown"],
  [data-radix-portal][data-testid*="WalletDropdown"] {
    z-index: 10000 !important;
  }
  
  /* Target all dropdown containers */
  [data-ock-theme='default-light'] [data-testid="ockWalletDropdown"],
  [data-ock-theme='default-dark'] [data-testid="ockWalletDropdown"],
  [data-ock-theme='base-light'] [data-testid="ockWalletDropdown"],
  [data-ock-theme='base-dark'] [data-testid="ockWalletDropdown"],
  div[data-testid*="ockWalletDropdown"],
  [role="menu"] {
    z-index: 10000 !important;
  }
  
  /* Specific styling for dropdown content - Don't override position, just z-index */
  [data-ock-theme='default-light'] [data-testid="ockWalletDropdownContent"],
  [data-ock-theme='default-dark'] [data-testid="ockWalletDropdownContent"],
  [data-ock-theme='base-light'] [data-testid="ockWalletDropdownContent"],
  [data-ock-theme='base-dark'] [data-testid="ockWalletDropdownContent"] {
    border-color: #0b55e9 !important;
    border-width: 1px !important;
    border-style: solid !important;
    z-index: 10000 !important; /* Much higher than bottom nav (z-50) */
    /* Don't override position - let Radix UI handle it */
  }
  
  /* Connect Wallet Modal Border Color */
  [data-ock-theme='default-light'] [data-testid="ockModalOverlay"],
  [data-ock-theme='default-dark'] [data-testid="ockModalOverlay"],
  [data-ock-theme='base-light'] [data-testid="ockModalOverlay"],
  [data-ock-theme='base-dark'] [data-testid="ockModalOverlay"] {
    border-color: #0b55e9 !important; /* Same blue border color as dropdown */
    border-width: 1px !important;
    border-style: solid !important;
  }
  
  /* Wallet Connection Buttons in Modal - Darker white border on left only, rounded */
  [data-ock-theme='default-light'] [data-testid="ockModalOverlay"] button:not([aria-label="Close modal"]),
  [data-ock-theme='default-dark'] [data-testid="ockModalOverlay"] button:not([aria-label="Close modal"]),
  [data-ock-theme='base-light'] [data-testid="ockModalOverlay"] button:not([aria-label="Close modal"]),
  [data-ock-theme='base-dark'] [data-testid="ockModalOverlay"] button:not([aria-label="Close modal"]) {
    border-left-color: #9ca3af !important; /* Darker white/gray border on left */
    border-left-width: 1px !important;
    border-left-style: solid !important;
    border-top: none !important;
    border-right: none !important;
    border-bottom: none !important;
    border-radius: 0.375rem !important; /* Slightly rounded corners */
  }
  
  /* Swap Button - White text */
  /* Target the button itself */
  [data-ock-theme='default-light'] [data-testid="ockSwapButton_Button"],
  [data-ock-theme='default-dark'] [data-testid="ockSwapButton_Button"],
  [data-ock-theme='base-light'] [data-testid="ockSwapButton_Button"],
  [data-ock-theme='base-dark'] [data-testid="ockSwapButton_Button"],
  [data-ock-theme='default-light'] button[data-testid="ockSwapButton_Button"],
  [data-ock-theme='default-dark'] button[data-testid="ockSwapButton_Button"],
  [data-ock-theme='base-light'] button[data-testid="ockSwapButton_Button"],
  [data-ock-theme='base-dark'] button[data-testid="ockSwapButton_Button"] {
    color: #ffffff !important;
  }
  
  /* Target the span inside the button - override ock:text-ock-foreground-inverse */
  [data-ock-theme='default-light'] [data-testid="ockSwapButton_Button"] span,
  [data-ock-theme='default-dark'] [data-testid="ockSwapButton_Button"] span,
  [data-ock-theme='base-light'] [data-testid="ockSwapButton_Button"] span,
  [data-ock-theme='base-dark'] [data-testid="ockSwapButton_Button"] span,
  [data-ock-theme='default-light'] button[data-testid="ockSwapButton_Button"] span,
  [data-ock-theme='default-dark'] button[data-testid="ockSwapButton_Button"] span,
  [data-ock-theme='base-light'] button[data-testid="ockSwapButton_Button"] span,
  [data-ock-theme='base-dark'] button[data-testid="ockSwapButton_Button"] span {
    color: #ffffff !important;
  }
  
  /* Override the CSS variable for ock-foreground-inverse within SwapButton */
  [data-ock-theme='default-light'] [data-testid="ockSwapButton_Button"] *,
  [data-ock-theme='default-dark'] [data-testid="ockSwapButton_Button"] *,
  [data-ock-theme='base-light'] [data-testid="ockSwapButton_Button"] *,
  [data-ock-theme='base-dark'] [data-testid="ockSwapButton_Button"] * {
    --ock-foreground-inverse: #ffffff !important;
    color: #ffffff !important;
  }
  
  /* Buy Button - White text */
  /* Target the button itself */
  [data-ock-theme='default-light'] [data-testid="ockBuyButton_Button"],
  [data-ock-theme='default-dark'] [data-testid="ockBuyButton_Button"],
  [data-ock-theme='base-light'] [data-testid="ockBuyButton_Button"],
  [data-ock-theme='base-dark'] [data-testid="ockBuyButton_Button"],
  [data-ock-theme='default-light'] button[data-testid="ockBuyButton_Button"],
  [data-ock-theme='default-dark'] button[data-testid="ockBuyButton_Button"],
  [data-ock-theme='base-light'] button[data-testid="ockBuyButton_Button"],
  [data-ock-theme='base-dark'] button[data-testid="ockBuyButton_Button"] {
    color: #ffffff !important;
  }
  
  /* Target the span inside the button - override ock:text-ock-foreground-inverse */
  [data-ock-theme='default-light'] [data-testid="ockBuyButton_Button"] span,
  [data-ock-theme='default-dark'] [data-testid="ockBuyButton_Button"] span,
  [data-ock-theme='base-light'] [data-testid="ockBuyButton_Button"] span,
  [data-ock-theme='base-dark'] [data-testid="ockBuyButton_Button"] span,
  [data-ock-theme='default-light'] button[data-testid="ockBuyButton_Button"] span,
  [data-ock-theme='default-dark'] button[data-testid="ockBuyButton_Button"] span,
  [data-ock-theme='base-light'] button[data-testid="ockBuyButton_Button"] span,
  [data-ock-theme='base-dark'] button[data-testid="ockBuyButton_Button"] span {
    color: #ffffff !important;
  }
  
  /* Override the CSS variable for ock-foreground-inverse within BuyButton */
  [data-ock-theme='default-light'] [data-testid="ockBuyButton_Button"] *,
  [data-ock-theme='default-dark'] [data-testid="ockBuyButton_Button"] *,
  [data-ock-theme='base-light'] [data-testid="ockBuyButton_Button"] *,
  [data-ock-theme='base-dark'] [data-testid="ockBuyButton_Button"] * {
    --ock-foreground-inverse: #ffffff !important;
    color: #ffffff !important;
  }
  
  /* Buy Component - Ensure it fits within viewport height */
  [data-testid="ockBuy_Container"],
  [data-testid="ockBuy_Container"] iframe,
  [data-testid="ockBuy_Container"] > div {
    max-height: calc(100vh - 350px) !important;
    height: auto !important;
    overflow-y: auto !important;
  }
  
  /* On mobile, adjust max-height to account for header and bottom nav */
  @media (max-width: 767px) {
    [data-testid="ockBuy_Container"],
    [data-testid="ockBuy_Container"] iframe,
    [data-testid="ockBuy_Container"] > div {
      max-height: calc(100vh - 280px) !important;
    }
  }
  
  /* Help make Buy component input fields clearer - target any input in Buy component */
  [data-testid="ockBuy_Container"] input[type="text"],
  [data-testid="ockBuy_Container"] input[type="number"] {
    /* Ensure input fields are visible and clear */
    font-size: 1rem !important;
  }
  
  /* Earn Component Buttons - Deposit and Withdraw - Black background, white text */
  /* Target buttons with ock:bg-ock-primary class (Earn buttons) */
  [data-ock-theme='default-light'] button.ock\:bg-ock-primary,
  [data-ock-theme='default-dark'] button.ock\:bg-ock-primary,
  [data-ock-theme='base-light'] button.ock\:bg-ock-primary,
  [data-ock-theme='base-dark'] button.ock\:bg-ock-primary {
    background-color: #000000 !important;
    color: #ffffff !important;
    opacity: 1 !important;
  }
  
  /* Target buttons within EarnDeposit and EarnWithdraw containers */
  [data-ock-theme='default-light'] [class*="EarnDeposit"] button,
  [data-ock-theme='default-dark'] [class*="EarnDeposit"] button,
  [data-ock-theme='base-light'] [class*="EarnDeposit"] button,
  [data-ock-theme='base-dark'] [class*="EarnDeposit"] button,
  [data-ock-theme='default-light'] [class*="EarnWithdraw"] button,
  [data-ock-theme='default-dark'] [class*="EarnWithdraw"] button,
  [data-ock-theme='base-light'] [class*="EarnWithdraw"] button,
  [data-ock-theme='base-dark'] [class*="EarnWithdraw"] button {
    background-color: #000000 !important;
    color: #ffffff !important;
    opacity: 1 !important;
  }
  
  /* Override opacity - remove opacity restrictions on Earn buttons */
  [data-ock-theme='default-light'] button.ock\:opacity-\[0\.38\],
  [data-ock-theme='default-dark'] button.ock\:opacity-\[0\.38\],
  [data-ock-theme='base-light'] button.ock\:opacity-\[0\.38\],
  [data-ock-theme='base-dark'] button.ock\:opacity-\[0\.38\] {
    opacity: 1 !important;
  }
  
  /* Target text color in Earn buttons - override ock:text-ock-foreground-inverse */
  [data-ock-theme='default-light'] button.ock\:text-ock-foreground-inverse,
  [data-ock-theme='default-dark'] button.ock\:text-ock-foreground-inverse,
  [data-ock-theme='base-light'] button.ock\:text-ock-foreground-inverse,
  [data-ock-theme='base-dark'] button.ock\:text-ock-foreground-inverse {
    color: #ffffff !important;
  }
  
  /* Target all child elements inside Earn buttons to ensure white text */
  [data-ock-theme='default-light'] [class*="EarnDeposit"] button *,
  [data-ock-theme='default-dark'] [class*="EarnDeposit"] button *,
  [data-ock-theme='base-light'] [class*="EarnDeposit"] button *,
  [data-ock-theme='base-dark'] [class*="EarnDeposit"] button *,
  [data-ock-theme='default-light'] [class*="EarnWithdraw"] button *,
  [data-ock-theme='default-dark'] [class*="EarnWithdraw"] button *,
  [data-ock-theme='base-light'] [class*="EarnWithdraw"] button *,
  [data-ock-theme='base-dark'] [class*="EarnWithdraw"] button * {
    color: #ffffff !important;
    --ock-foreground-inverse: #ffffff !important;
  }
  
  /* Target all buttons within Earn component that have primary background class */
  /* This catches both Deposit and Withdraw buttons */
  [data-ock-theme='default-light'] [class*="Earn"] button.ock\:bg-ock-primary,
  [data-ock-theme='default-dark'] [class*="Earn"] button.ock\:bg-ock-primary,
  [data-ock-theme='base-light'] [class*="Earn"] button.ock\:bg-ock-primary,
  [data-ock-theme='base-dark'] [class*="Earn"] button.ock\:bg-ock-primary {
    background-color: #000000 !important;
    color: #ffffff !important;
    opacity: 1 !important;
  }
  
  /* Override hover states for Earn buttons */
  [data-ock-theme='default-light'] [class*="Earn"] button.ock\:bg-ock-primary:hover,
  [data-ock-theme='default-dark'] [class*="Earn"] button.ock\:bg-ock-primary:hover,
  [data-ock-theme='base-light'] [class*="Earn"] button.ock\:bg-ock-primary:hover,
  [data-ock-theme='base-dark'] [class*="Earn"] button.ock\:bg-ock-primary:hover {
    background-color: #000000 !important;
    opacity: 0.9 !important;
  }
  
  /* Comprehensive selector for any button with opacity class inside Earn component */
  [data-ock-theme='default-light'] [class*="Earn"] button[class*="opacity"],
  [data-ock-theme='default-dark'] [class*="Earn"] button[class*="opacity"],
  [data-ock-theme='base-light'] [class*="Earn"] button[class*="opacity"],
  [data-ock-theme='base-dark'] [class*="Earn"] button[class*="opacity"] {
    opacity: 1 !important;
    background-color: #000000 !important;
    color: #ffffff !important;
  }
  :root {
    --background: var(--color-background);
    --foreground: var(--color-foreground);
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --background: #0a0a0a;
      --foreground: #ededed;
      /* Update Tailwind color variables for dark mode */
      --color-background: #0a0a0a;
      --color-foreground: #ededed;
      --color-gray-200: #374151;
      --color-gray-800: #f3f4f6;
    }
  }

  /* OnchainKit Theme Overrides for default theme */
  /* Light Mode */
  [data-ock-theme='default-light'] {
    /* Typography and Shape - match your design */
    /* Radius overridden by global theme */
    --ock-radius-inner: 0.375rem;

    /* Foreground Colors - align with your custom theme */
    --ock-foreground: var(--foreground);
    --ock-foreground-muted: color-mix(in srgb, var(--foreground) 60%, transparent);
    --ock-foreground-inverse: #ffffff;
    --ock-foreground-disabled: color-mix(in srgb, var(--foreground) 50%, transparent);

    /* Background Colors - align with your custom theme */
    --ock-background: var(--background);
    --ock-background-hover: color-mix(in srgb, var(--foreground) 5%, var(--background));
    --ock-background-active: color-mix(in srgb, var(--foreground) 10%, var(--background));
    --ock-background-alternate: color-mix(in srgb, var(--foreground) 3%, var(--background));
    --ock-background-alternate-hover: color-mix(in srgb, var(--foreground) 5%, var(--background));
    --ock-background-alternate-active: color-mix(in srgb, var(--foreground) 10%, var(--background));
    --ock-background-inverse: color-mix(in srgb, var(--foreground) 5%, var(--background));
    --ock-background-inverse-hover: color-mix(in srgb, var(--foreground) 10%, var(--background));
    --ock-background-inverse-active: color-mix(in srgb, var(--foreground) 15%, var(--background));
    --ock-background-reverse: var(--foreground);

    /* Lines */
    --ock-line: color-mix(in srgb, var(--foreground) 10%, var(--background));
  }

  /* Dark Mode */
  [data-ock-theme='default-dark'] {
    /* Typography and Shape - match your design */
    /* Radius overridden by global theme */
    --ock-radius-inner: 0.375rem;

    /* Foreground Colors - align with your custom theme */
    --ock-foreground: var(--foreground);
    --ock-foreground-muted: color-mix(in srgb, var(--foreground) 60%, transparent);
    --ock-foreground-inverse: #000000;
    --ock-foreground-disabled: color-mix(in srgb, var(--foreground) 50%, transparent);

    /* Background Colors - align with your custom theme */
    --ock-background: var(--background);
    --ock-background-hover: color-mix(in srgb, var(--foreground) 10%, var(--background));
    --ock-background-active: color-mix(in srgb, var(--foreground) 15%, var(--background));
    --ock-background-alternate: color-mix(in srgb, var(--foreground) 5%, var(--background));
    --ock-background-alternate-hover: color-mix(in srgb, var(--foreground) 10%, var(--background));
    --ock-background-alternate-active: color-mix(in srgb, var(--foreground) 15%, var(--background));
    --ock-background-inverse: color-mix(in srgb, var(--foreground) 10%, var(--background));
    --ock-background-inverse-hover: color-mix(in srgb, var(--foreground) 15%, var(--background));
    --ock-background-inverse-active: color-mix(in srgb, var(--foreground) 20%, var(--background));
    --ock-background-reverse: var(--foreground);

    /* Lines */
    --ock-line: color-mix(in srgb, var(--foreground) 15%, var(--background));
  }

  /* Base theme overrides (if you switch to base theme) */
  [data-ock-theme='base-light'],
  [data-ock-theme='base-dark'] {
    --ock-radius-default: 0.75rem;
    --ock-radius-inner: 0.5rem;
  }

  [data-ock-theme='base-light'] {
    --ock-background: var(--background);
    --ock-foreground: var(--foreground);
  }

  [data-ock-theme='base-dark'] {
    --ock-background: var(--background);
    --ock-foreground: var(--foreground);
  }

  html,
  body {
    max-width: 100vw;
    overflow-x: hidden;
  }

  body {
    color: var(--foreground);
    background: var(--background);
    font-family: var(--font-inter), sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  code {
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: 6px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    font-family: var(--font-source-code-pro), monospace;
    font-size: 0.875rem;
    padding: 0.25rem 0.5rem calc(0.25rem + 2px);
  }

  @media (prefers-color-scheme: dark) {
    code {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
  }

  *,
  ::before,
  ::after {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
    border-color: currentColor;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  @media (prefers-color-scheme: dark) {
    html {
      color-scheme: dark;
    }
  }
}

